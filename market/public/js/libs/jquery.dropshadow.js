(function(a){var i=1;a.fn.dropShadow=function(h){var f=a.extend({left:4,top:4,blur:2,opacity:0.5,color:"black",swap:false},h),m=a([]);this.not(".dropShadow").each(function(){var c=a(this),e=[],g=f.blur<=0?0:f.blur,j=g==0?f.opacity:f.opacity/(g*8),b=f.swap?i:i+1,n=f.swap?i+1:i,k;k=this.id?this.id+"_dropShadow":"ds"+(1+Math.floor(9999*Math.random()));a.data(this,"shadowId",k);a.data(this,"shadowOptions",h);c.attr("shadowId",k).css("zIndex",b);c.css("position")!="absolute"&&c.css({position:"relative",
zoom:1});bgColor=c.css("backgroundColor");if(bgColor=="rgba(0, 0, 0, 0)")bgColor="transparent";e[0]=bgColor!="transparent"||c.css("backgroundImage")!="none"||this.nodeName=="SELECT"||this.nodeName=="INPUT"||this.nodeName=="TEXTAREA"?a("<div></div>").css("background",f.color):c.clone().removeAttr("id").removeAttr("name").removeAttr("shadowId").css("color",f.color);e[0].addClass("dropShadow").css({height:c.outerHeight(),left:g,opacity:j,position:"absolute",top:g,width:c.outerWidth(),zIndex:n});j=8*
g+1;for(b=1;b<j;b++)e[b]=e[0].clone();b=1;for(var d=g;d>0;){e[b].css({left:d*2,top:0});e[b+1].css({left:d*4,top:d*2});e[b+2].css({left:d*2,top:d*4});e[b+3].css({left:0,top:d*2});e[b+4].css({left:d*3,top:d});e[b+5].css({left:d*3,top:d*3});e[b+6].css({left:d,top:d*3});e[b+7].css({left:d,top:d});b+=8;d--}var l=a("<div></div>").attr("id",k).addClass("dropShadow").css({left:c.position().left+f.left-g,marginTop:c.css("marginTop"),marginRight:c.css("marginRight"),marginBottom:c.css("marginBottom"),marginLeft:c.css("marginLeft"),
position:"absolute",top:c.position().top+f.top-g,zIndex:n});for(b=0;b<j;b++)l.append(e[b]);c.after(l);m=m.add(l);a(window).resize(function(){try{l.css({left:c.position().left+f.left-g,top:c.position().top+f.top-g})}catch(o){}});i+=2});return this.pushStack(m)};a.fn.redrawShadow=function(){this.removeShadow();return this.each(function(){var h=a.data(this,"shadowOptions");a(this).dropShadow(h)})};a.fn.removeShadow=function(){return this.each(function(){var h=a(this).shadowId();a("div#"+h).remove()})};
a.fn.shadowId=function(){return a.data(this[0],"shadowId")};a(function(){var h="<style type='text/css' media='print'>";h+=".dropShadow{visibility:hidden;}</style>";a("head").append(h)})})(jQuery);