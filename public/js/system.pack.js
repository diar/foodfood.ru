$loader='<div id="loader"><img src="/public/images/loader.gif" alt="\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..." /></div>';$loader_gray='<div id="loader"><img src="/public/images/loader_gray.gif" alt="\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..." /></div>';$.showDialog=function(a){scroll=$.browser.msie?document.documentElement.scrollTop+150:$(document).scrollTop()+200;$("#"+a).css("top",scroll);$("#"+a).fadeIn(500)};$.hideDialog=function(a){$("#"+a).fadeOut(500)};
$.alert=function(a,e){typeof alert_timeout!="undefined"&&clearTimeout(alert_timeout);alert_timeout=setTimeout('$.hideDialog ("message_dialog")',5E3);if(!$.browser.msie){scroll=$(document).scrollTop();$("#message_dialog").css("top",scroll)}e?$("#message_dialog").css({background:"#D84705",opacity:"0.9",color:"#fff"}):$("#message_dialog").css({background:"#489615",opacity:"0.9",color:"#fff"});$("#message_dialog").css({marginTop:"-500px"}).show();$("#message_dialog").animate({marginTop:"0"},1E3);$("#message_dialog .text").html(a)};
$(document).ready(function(){apply_styles();$('input[type="text"]').keyboard("enter",function(){$(this).parents(".ajax_form").find('input[type="button"]').click();return false});$("#login_block #login").click(function(){$("#auth_message").html("");$.showDialog("auth_dialog")});$("#login_block #registration").click(function(){$.showDialog("registration_dialog")});$("#auth_submit").click(function(){login=$("#auth_login").val();password=$("#auth_password").val();remember=$("#remain_me_check").attr("checked");
if(login!=""&&password!=""){$("#auth_loader").fadeIn(500);password=hex_md5(password);$.post("/"+site_city+"/auth/login",{login:login,password:password,remember:remember},function(a){$("#auth_message").html("");$("#auth_loader").fadeOut(300);if(a=="OK")document.location.reload();else if(a=="NOT_EXIST")$("#auth_message").html("\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435\u0432\u0435\u0440\u043d\u044b");
else if(a=="LOGIN"){$("#auth_message").html("\u041e\u0448\u0438\u0431\u043a\u0430: \u0432\u0432\u0435\u0434\u0438\u0442\u0435 e-mail \u0438\u043b\u0438 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430");$("#auth_password").css("backgroundColor","#c1c1c1");$("#auth_login").css("backgroundColor","#c1c1c1")}else $("#auth_message").html("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437")})}else $("#auth_message").html("\u041e\u0448\u0438\u0431\u043a\u0430: \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f");
login==""?$("#auth_login").css("backgroundColor","#c1c1c1"):$("#auth_login").css("backgroundColor","#fff");password==""?$("#auth_password").css("backgroundColor","#c1c1c1"):$("#auth_password").css("backgroundColor","#fff")});$("#registration_submit").click(function(){name=$("#reg_name").val();mail=$("#reg_mail").val();phone=$("#reg_phone").val();if(rules=$("#reg_rules").attr("checked"))if(name!=""&&mail!=""&&phone!=""){$("#reg_message").html("");$("#reg_loader").fadeIn(500);$.post("/"+site_city+"/auth/registration",
{name:name,mail:mail,phone:phone},function(a){$("#reg_loader").fadeOut(500);if(a=="SPACE")$("#reg_message").html("\u041e\u0448\u0438\u0431\u043a\u0430: \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f");else if(a=="PHONE_EXIST")$("#reg_message").html("\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u043d\u043e\u043c\u0435\u0440\u043e\u043c \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442");
else if(a=="MAIL_EXIST")$("#reg_message").html("\u041e\u0448\u0438\u0431\u043a\u0430: \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c e-mail \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442");else if(a=="NOT_PHONE")$("#reg_message").html("\u041e\u0448\u0438\u0431\u043a\u0430: \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0432 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435");
else if(a=="NOT_MAIL")$("#reg_message").html("\u041e\u0448\u0438\u0431\u043a\u0430: \u0432\u0432\u0435\u0434\u0438\u0442\u0435 e-mail \u0432 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435");else a=="OK"?$("#reg_message").html('<span style="color:green">\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e. \u041f\u0430\u0440\u043e\u043b\u044c \u0432\u044b\u0441\u043b\u0430\u043d \u043d\u0430 \u0432\u0430\u0448 \u043d\u043e\u043c\u0435\u0440</span>'):
$("#reg_message").html("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437")})}else $("#reg_message").html("\u041e\u0448\u0438\u0431\u043a\u0430: \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f");else $("#reg_message").html("\u041e\u0448\u0438\u0431\u043a\u0430: \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u044c\u0442\u0435\u0441\u044c \u0441 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c\u0438");
return false});$(".close_button, .close").click(function(){id=$(this).parents(".dialog").attr("id");$.hideDialog(id);return false});$("#discount_submit").click(function(){name=$("#discount_name").val();phone=$("#discount_phone").val();email=$("#discount_mail").val();$("#discount_loader").show();$.post("/"+site_city+"/discount/get/"+$(this).attr("partner")+"/",{name:name,phone:phone,email:email},function(a){$("#discount_loader").hide();$("#discount_message").html(a)})})});
function update_rating_without_text(a,e){user_auth!="1"?$.alert("\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u043e\u0439\u0442\u0438 \u043d\u0430 \u0441\u0430\u0439\u0442, \u0447\u0442\u043e\u0431\u044b \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u043e\u0442\u0437\u044b\u0432\u044b",true):$.post("/"+site_city+"/restaurant/"+e+"/"+a+"/",function(c){if(c=="OK")$.alert("\u0412\u0430\u0448 \u0433\u043e\u043b\u043e\u0441 \u0443\u0447\u0442\u0435\u043d",false);else if(c=="NO_LOGIN")$.alert("\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u043e\u0439\u0442\u0438 \u043d\u0430 \u0441\u0430\u0439\u0442, \u0447\u0442\u043e\u0431\u044b \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u043e\u0442\u0437\u044b\u0432\u044b",
true);else if(c=="ALREADY")$.alert("\u0412\u044b \u0443\u0436\u0435 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043b\u0438 \u0437\u0430 \u044d\u0442\u043e\u0442 \u0440\u0435\u0441\u0442\u043e\u0440\u0430\u043d",true);else c=="LENGTH"?$.alert("\u0414\u043b\u0438\u043d\u0430 \u043e\u0442\u0437\u044b\u0432\u0430 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u0430 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0442\u044c 100 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",true):$.alert("\u041e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437",
true)})}function apply_styles(){$.browser.opera&&$(".rounded").corner("round 3px");$(".opacity").css("opacity","0.5");$(".text_shadow").dropShadow()}
function serialize(a){var e=function(d){var h=typeof d,f,j;if(h=="object"&&!d)return"null";if(h=="object"){if(!d.constructor)return"object";d=d.constructor.toString();if(f=d.match(/(\w+)\(/))d=f[1].toLowerCase();f=["boolean","number","string","array"];for(j in f)if(d==f[j]){h=f[j];break}}return h},c=e(a),b,i="";switch(c){case "function":b="";break;case "undefined":b="N";break;case "boolean":b="b:"+(a?"1":"0");break;case "number":b=(Math.round(a)==a?"i":"d")+":"+a;break;case "string":b="s:"+a.length+
':"'+a+'"';break;case "array":case "object":b="a";var k=0,l="",g;for(g in a){i=e(a[g]);if(i!="function"){i=g.match(/^[0-9]+$/)?parseInt(g):g;l+=serialize(i)+serialize(a[g]);k++}}b+=":"+k+":{"+l+"}";break}if(c!="object"&&c!="array")b+=";";return b};